{{define "head"}}
<title>go web prictice</title>
<script type="text/javascript">
var reconnect = !0;
var times = 0;
var wsurl = "ws://www.sthdif.com:8081/ws"
var ws = new WebSocket(wsurl);
console.log("ws newed");

ws.onopen = function(evt) { 
  console.log("ws open"); 
  ws.send("Hello WebSockets!");
};

ws.onmessage = function(evt){
    console.log("ws receive:" + evt.data);
    times++;
    ws.send("ws = " + times.toString());
};

ws.onclose = function(evt){
    console.log("ws closed:" + evt.data);
    if (reconnect){
        ws = new WebSocket(wsurl);
    }
};

ws.onerror = function(evt){
    console.log("ws error:" + evt.data)
    ws.close();
};
</script>
{{end}}